
import React from "react";
import { BitBeastAnimal, ElementalAffinity } from "@/types/bitBeast";
import { cn } from "@/lib/utils";

type BitBeastIconProps = {
  animal: BitBeastAnimal;
  element: ElementalAffinity;
  size?: "sm" | "md" | "lg" | "xl";
  className?: string;
  isActive?: boolean;
};

// Element color mappings
const elementColors: Record<ElementalAffinity, string> = {
  fire: "text-amber-500",
  water: "text-blue-500",
  earth: "text-amber-700",
  air: "text-sky-300",
  lightning: "text-yellow-300",
  ice: "text-cyan-300",
  darkness: "text-purple-900",
  light: "text-yellow-100"
};

// Element glow mappings
const elementGlows: Record<ElementalAffinity, string> = {
  fire: "filter drop-shadow(0 0 3px rgba(251, 191, 36, 0.6))",
  water: "filter drop-shadow(0 0 3px rgba(59, 130, 246, 0.6))",
  earth: "filter drop-shadow(0 0 3px rgba(180, 83, 9, 0.6))",
  air: "filter drop-shadow(0 0 3px rgba(186, 230, 253, 0.6))",
  lightning: "filter drop-shadow(0 0 3px rgba(253, 224, 71, 0.6))",
  ice: "filter drop-shadow(0 0 3px rgba(103, 232, 249, 0.6))",
  darkness: "filter drop-shadow(0 0 3px rgba(88, 28, 135, 0.6))",
  light: "filter drop-shadow(0 0 3px rgba(254, 249, 195, 0.6))"
};

const sizeMappings = {
  sm: "w-8 h-8",
  md: "w-12 h-12",
  lg: "w-16 h-16",
  xl: "w-20 h-20"
};

const BitBeastIcon: React.FC<BitBeastIconProps> = ({
  animal,
  element,
  size = "md",
  className,
  isActive = false
}) => {
  // Get element styling
  const elementColor = elementColors[element];
  const elementGlow = elementGlows[element];
  const sizeClass = sizeMappings[size];
  
  // Add additional animation for active state
  const activeAnimationClass = isActive 
    ? "animate-pulse scale-110" 
    : "";

  // SVG style combining color, glow and active state
  const svgStyle = cn(
    elementColor,
    isActive ? elementGlow : "",
    activeAnimationClass,
    "transition-all duration-300"
  );

  // Render the appropriate animal icon
  const renderAnimalIcon = () => {
    switch (animal) {
      case "dragon":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M14 5h1.67a1 1 0 01.5.16L21 8V7a1 1 0 011-1 1 1 0 011 1v8a1 1 0 01-1 1h-4a1 1 0 01-1-1v-1H9.83l7.92 3.96A1 1 0 0119 21h-4.1c-3.05 0-6.61-1.73-9.3-4.8l-1.88-2.17A1 1 0 013.58 13V11a1 1 0 012 0v1.43c1.77 2.39 3.83 3.57 7.42 3.57h.5L6.41 12A1 1 0 016 11.4v-.28a1 1 0 01.59-.92l6.7-3.17.01-.24V5zm.2-4a1 1 0 100 2 1 1 0 000-2M22 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z" />
          </svg>
        );
      case "phoenix":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M9 3C6.23 3 4 5.23 4 8c0 2.76 2.23 5 5 5 2.76 0 5-2.24 5-5 0-2.77-2.24-5-5-5m8 0a6 6 0 01-3 5.22 7.35 7.35 0 01.8 3.45c0 1.22-.3 2.4-.9 3.33H20a2 2 0 012 2c0 .56-.45 1-1 1 0 .56-.45 1-1 1H4c-.56 0-1-.44-1-1-.55 0-1-.44-1-1a2 2 0 012-2h5.1c-.6-.94-.9-2.11-.9-3.33l.03-.45.03-.33A6.03 6.03 0 014 8c0-3.32 2.67-6 6-6 2.7 0 5 1.8 5.74 4.28A3 3 0 0121 9a3 3 0 01-3 3 3 3 0 01-2.93-2.43c.47-1 .93-2.34.93-3.57 0-1.1-.9-2-2-2s-2 .9-2 2c0 1.97 1.5 5 4 5a1 1 0 011 1 1 1 0 01-1 1c-1.63 0-3.06-.45-4.25-1.35A5.08 5.08 0 019 13c-1.3 0-2.4-.54-3.3-1.35-.62.53-1.7 1.35-1.7 3.68 0 .56.44 1 1 1h14c.56 0 1-.44 1-1 0-2.33-1.08-3.15-1.7-3.68-.64.58-1.37 1-2.3 1.26V13l.16-.03a5 5 0 003.46-2.33A3 3 0 0021 9a3 3 0 00-3-3c-.6 0-1.13.21-1.56.56A6.12 6.12 0 0017 3" />
          </svg>
        );
      case "turtle":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M19.31 5h-14.6A4.25 4.25 0 001 9.25c0 .58.12 1.13.32 1.64l1.73 3.6c.02 1.26.85 2.35 2.02 2.81.13 1.29.72 2.4 1.58 3.21.86.8 2.09 1.49 3.35 1.49 1.22 0 2.17-.67 3-1.5.83-.83 1.5-2 1.5-3.56 0-.15-.01-.3-.03-.44 1.63.39 3.07-1.27 3.08-2.89a2.85 2.85 0 012.03-2.74l1.7-3.55c.2-.5.32-1.06.32-1.64A4.25 4.25 0 0019.3 5M9 9a1 1 0 110 2 1 1 0 010-2m6 0a1 1 0 110 2 1 1 0 010-2m-2.5 7.5c0 .84-.34 1.41-.91 1.98-.57.56-1.31.96-2.09.96-.71 0-1.59-.5-2.22-1.09-.49-.44-.83-1.17-.95-1.85h6.17z" />
          </svg>
        );
      case "tiger":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M22 8.1l-1.95 1.19c.21.63.75 1.01 1.3 1.01a1.1 1.1 0 001.06-.72c.19-.59-.17-1.24-.41-1.48M7.86 17a2.014 2.014 0 100 4.028A2.014 2.014 0 007.86 17zM19.92 12.03c-.7.03-1.24.73-1.34 1.37-.1.55.1 1.26.37 1.79l-.95.26a.75.75 0 00-.54.8l.06.57c.03.29.27.51.56.51h.35a.815.815 0 00.73-.5c.31-.82.53-1.86.39-2.76-.13-.83-.55-1.95-1.57-2.04M8.71 8c0-1.3-1.06-2.35-2.36-2.35S4 6.7 4 8s1.06 2.35 2.35 2.35S8.71 9.3 8.71 8m7.89 2a2.18 2.18 0 100 4.36 2.18 2.18 0 000-4.36m3.9-4.19c.3 0 .54-.24.54-.54 0-.3-.24-.54-.54-.54-.3 0-.54.24-.54.54 0 .3.24.54.54.54m.65 2.64c.98-.17 1.67-1.19 1.49-2.14-.2-1.02-1.2-1.7-2.14-1.49-.29.05-.55.16-.79.31L14.58 2.3A.9.9 0 0013.78 2h-.13a.9.9 0 00-.7.44L9.72 7.89c-.56.04-1.1.16-1.61.3.47-.73.75-1.6.75-2.54 0-.82-.25-1.58-.67-2.21A18.75 18.75 0 0013.1 2C14.12 2 15 1.11 15 0L3 1c0 1.11.88 2 2 2 .91 0 1.66-.6 1.91-1.43 0 .07-.03.14-.03.21 0 .24.03.47.07.7A2.33 2.33 0 003.29 4a4.96 4.96 0 00-1.02 3 4.98 4.98 0 009.95 0c0-.32-.04-.64-.09-.94.47-.15.95-.24 1.46-.24 1.94 0 3.5 1.3 3.5 2.94 0 1.4-1.23 2.55-2.85 2.77-1.18-.28-2.8-.41-4.13-.07-3.85 1-6.26 4.66-5.58 8.15 0 .09.05.17.09.25l.32 1.15c.35 1.2 1.35 2 2.56 2 .32 0 .63-.06.92-.17l2.16-.86a.52.52 0 00.3-.5.51.51 0 00-.36-.47l-.32-.12c-.48-.17-.84-.53-1.01-1-.35-.94-.13-2.16.78-2.77.69-.45 1.59-.54 2.25-.21.03.02.06.03.1.03.39.09.73.36.92.81a.5.5 0 00.94-.23c-.03-.26-.09-.51-.17-.74-.08-.2-.34-.75-.34-.75-.23-.4-.58-.72-1-.91h.01c-1.04-.51-2.5-.39-3.49.24-1.42.91-1.87 2.65-1.35 4.06.23.62.65 1.14 1.2 1.47l-.6.24a.83.83 0 00-.1 1.47c.17.13.38.16.57.1l2.81-1.12c.51-.2.75-.8.53-1.3-.01-.03-.03-.05-.04-.08-.3-.63-.93-1.04-1.63-1.03l4.32-1.73c.4-.16.63-.57.52-.99-.16-.64-.48-1.52-1.31-1.92-.32-.16-.7-.2-1.05-.1v-.01a4.48 4.48 0 015.29-2.35m.63-5.24c.3 0 .54-.24.54-.54 0-.3-.24-.54-.54-.54-.3 0-.54.24-.54.54 0 .3.24.54.54.54z" />
          </svg>
        );
      case "wolf":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M15.8 21.7c-1.1.1-2 .1-3 0l-.3 1c0 .2.1.3.3.3h2.7c.2 0 .3-.1.3-.3 0-.3-.1-.7 0-1M6 12l.2-5h13.2l.5 5H6m8.9-11c-1.1.1-2.2.4-3.1.8-.9-.4-2-.6-3.1-.8L8 2h7.6c.1 0 .3.2.3.3V1M6 22h13v-2H6v2m4.2-19c-.5.1-.9.3-1.3.5 1 .4 1.7 1.3 1.7 2.3C10.3 7 9.1 8 7.8 8c-.8 0-1.5-.5-1.9-1.2 0 .5-.1 1-.1 1.6-.1 2 .1 3.8.4 5.5 1.1-.4 2.3-.6 3.5-.6 1.3 0 2.5.2 3.5.6.3-1.7.5-3.5.5-5.5 0-.6-.1-1.1-.1-1.6-.4.7-1.1 1.2-1.9 1.2-1.3 0-2.4-1-2.4-2.2 0-1 .7-1.9 1.7-2.3-.4-.2-.9-.4-1.3-.5M2 12c0-1 .1-1.9.2-2.8.3.1.6.2.9.2C4.6 9.3 6 8 6 6.4c0-.5-.1-1-.4-1.5.5.3 1 .7 1.5 1.1 0-1 .8-1.9 1.9-1.9 1 0 1.9.9 1.9 1.9.5-.4 1-.8 1.5-1.1-.2.5-.4 1-.4 1.5 0 1.6 1.3 2.9 2.9 2.9.3 0 .6-.1.9-.2.1.9.2 1.8.2 2.8 0 4.9-3.4 9.1-8 10.4-4.6-1.4-8-5.5-8-10.3z" />
          </svg>
        );
      case "eagle":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M23 7s-3.95-3.95-11-3.95S1 7 1 7l1.05 1.06c.17-.17.34-.33.53-.47C4.46 6.25 8 4.8 11 4.8s6.54 1.46 8.43 2.8c.18.14.35.3.52.46L21 7h2zM11 9c-1.1 0-2 .9-2 2 0 .74.4 1.38 1 1.72V22h2v-9.28c.6-.35 1-.98 1-1.72 0-1.1-.9-2-2-2m2.5-2c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5m1 1.03A6.002 6.002 0 0017 13a6 6 0 005.85-4.67S20.73 6.95 17 6.95a5.9 5.9 0 00-2.82.71A2.973 2.973 0 0011 6c-1.18 0-2.19.69-2.67 1.67C7.27 6.95 6 6.03 5 6.03c-3.72 0-5.77 2.3-5.77 2.3A6 6 0 005 13a6.008 6.008 0 002.5-5.03c.67.43 1.5.68 2.5.68.77 0 1.5-.17 2.07-.45A2.996 2.996 0 0011 10a2.96 2.96 0 001.42-2.83c.48.29 1.07.45 1.73.45.93 0 1.76-.24 2.5-.62-.37.59-.88 1.1-1.5 1.45L16 9.8s.97-.47 1.65-1.26C18.83 9.23 20.18 10 22 10l-1-2c-1.82 0-3.17-.77-3.36-1.46-.68.8-1.65 1.26-1.65 1.26l-.9-1.34c.63-.36 1.14-.86 1.5-1.45-.74.38-1.57.62-2.5.62-.66 0-1.25-.16-1.73-.45C11.88 6.1 11.5 7 11 7c-.44 0-.85-.15-1.18-.4-.57.28-1.3.45-2.07.45-1 0-1.83-.25-2.5-.68C5.25 7.95 5 9.45 5 11s.25 3.05.73 4.23c.68-.06 1.31-.17 1.9-.31C7.1 13.83 7 12.65 7 11.5c0-.63.07-1.26.19-1.86A4.16 4.16 0 009 10.5c.77 0 1.5-.2 2.1-.57-.07.31-.1.63-.1.97 0 .85.27 1.64.71 2.29-.86-.01-1.65-.4-2.34-.91a16.655 16.655 0 01-.62 4.03C8.8 17.5 9.1 19 9.5 19c.3 0 .53-.65.64-1.67.58.7 1.37 1.17 2.26 1.28-.3.37-.77.6-1.3.6-.78 0-1.45-.38-2.02-.55-.23.69-.58 1.33-.98 1.33-.63 0-1.16-1.59-1.46-3.54-.54.17-1.08.31-1.64.39A11.421 11.421 0 0011 20c.21 0 .42 0 .63-.01a3.858 3.858 0 01-.63-.99M7.45 15c.44 0 .8.95.8 2.12 0 .36-.03.7-.09 1-.39-.34-.68-.77-.86-1.25.05-.64.15-1.37.15-1.87zm9.91-3.5c0 .7-.13 1.4-.35 2.08A16.655 16.655 0 0016.34 9h.16c.47 0 .92.05 1.36.15-.31.6-.5 1.22-.5 1.85v.5zm-.36 2.43c.4.13.59 1.62.07 2.03-.54-.98-1.45-1.73-2.57-1.97.84-.1 1.62-.48 2.19-1.06.1.32.2.66.31 1M17.5 13c.83 0 1.5-1.12 1.5-2.5s-.67-2.5-1.5-2.5z" />
          </svg>
        );
      case "snake":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M20 8h-5v2h5v2h-8V6h3V4h-6v2h3v6H4v-2h5V8H4V6h5V5c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-1h5v1c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-7c0-1.1-.9-2-2-2M6 18H3v-2h3v2m13 0h-3v-2h3v2" />
          </svg>
        );
      case "lion":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M22.65 16.97c-.08-.09-.16-.17-.25-.25 1.02-2.89.08-5.5-.4-6.45-.63-1.25-2.31-1.5-2.29.39.01.68.27 1.18.89 1.31-.19.34-.47.65-.87.88.46-1.08.41-2.55.09-3.38-.79-2.04-2.48-1.95-2.54-.35-.03.72.24 1.45.8 1.46-.19.52-.52.95-1.01 1.16.76-1.6 1.11-3.76.21-4.32-1.13-.7-2.16.53-1.7 1.66.31.77.84 1 1.21.9-.19.25-.5.44-.89.51 0 0 .5-1.38-.18-2.32-.87-1.2-2.21-.71-2.19.78.01.79.31 1.45.8 1.51-.28.22-.67.36-1.13.39 1.62-1.9 1.75-5.26.09-5.5-2.65-.38-2.15 4.75.12 6.23-.5.12-1.08.16-1.72.16-1.69-.01-3.29-.34-3.29-.34-.48-.09-.7.27-.41.85.34.67 3.19 1.13 5.77 1.13.75 0 1.5-.05 2.2-.16-.22.36-.5.83-.83 1.36-1.3.31-4.1.49-4.92.25l-.28-.08c-.43-.12-.59.18-.42.56.3.68 2.24 1.35 5.08 1.15-.19.64-.37 1.31-.53 2.02-1.39.53-4.44.89-5.42.46l-.2-.09c-.41-.16-.62.12-.45.56.32.85 2.41 1.7 5.61 1.26-.05.74-.09 1.5-.09 2.3 0 .09-.15 2.47 1.83 3.5 0 0 0-2.88 3.45-2.88 3.28 0 3.4 2.9 3.4 2.9 2.2-.97 1.86-3.5 1.86-3.5 0-.64-.03-1.24-.06-1.82 3.19.48 5.3-.35 5.62-1.18.17-.44-.05-.71-.47-.55-.95.34-4.12.01-5.52-.53-.18-.69-.39-1.33-.61-1.92 2.82.17 4.76-.47 5.07-1.13.17-.37 0-.64-.43-.52-.89.24-3.78.05-5.09-.27-.38-.55-.71-1.03-.96-1.39.35.07.73.12 1.12.16.99.11 2.35.15 3.57-.24 2.06-1.24 2.68-5.16.13-5.02-1.63.09-1.56 2.63-.04 4.65z" />
          </svg>
        );
      case "bear":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M17.45 12.31c-1.08-.45-1.83-1.48-1.83-2.7 0-1.24.74-2.31 1.81-2.76-1.95-.17-3.58 1.53-3.65 3.44 0 .18.03.36.08.53-1.28-1.31-1.88-3.33-1.58-5.42-1.28 1.22-1.75 3.18-1.05 5.23.12.34-.13.77-.71.87-.76.14-1.45-.32-1.11-1.16.7-1.77 1-3.35-1.13-5.93-1.39 2.19-1.93 4.84.08 7.41.52.67-.13 1.65-1.23 1.59-1.35-.08-1.3-1.52-.63-2.24-1.97.37-2.88 2.25-2.88 4.24 0 1.83.93 3.21 2.01 3.82-.64.32-1.33.5-2.07.5a3.77 3.77 0 01-3.76-3.76c0-2.01 1.59-3.68 3.76-3.76-1.48-1.78-1.78-4.57.5-6.68-3.43 0-6.5 2.8-6.5 6.24 0 1.87.82 3.56 2.13 4.71.28.25.46.6.46.99 0 .74-.6 1.34-1.34 1.34a1.329 1.329 0 01-.95-.4C1.28 15.38.5 13.2.5 10.82.5 5.85 4.62 1.81 9.7 1.81c2.67 0 5.06 1.07 6.76 2.78.59.6 1.42.95 2.31.95 1.36 0 2.39-.45 2.78-1.27-.33 1.02-1.05 1.97-2.01 2.63 3.8.91 5.09 4.68 4.26 7.63-.83 2.96-4.44 5.24-8.38 3.71 2.07-.45 3.77-1.79 3.77-3.76 0-1.8-1.1-3.69-3.1-4.03.97.72 1.13 2.02.16 2.54-.72.39-1.92.05-1.92-1.21 0-1.32 0-2.55 3.15-3.41-1.04.49-1.37 1.45-1.03 2.14z" />
          </svg>
        );
      case "shark":
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M14.17 6.63c2.37 1.49 3.83 4.08 3.83 6.87 0 .95-.16 1.84-.47 2.67l1.93-1.24-1.05 2.1 2.3-1.1-1.5 2.35 2.45-.4-2.16 1.5 2.68.2-3.69 1.42h3.4l-4.08.8 3.04 1.4-3.87-.45 2.67 1.88-4-1.09 1.8 2.12-3.05-1.85.34 2.5-1.79-2.35-.32 1.93-1.16-1.77-1.39 1.67-.23-1.93-2.13 1.66.31-2.15-3.12 1.72.6-2-2.63 1.17.84-1.73-2.28.5 1.07-1.6-2.2.04 1.05-1.17-1.43-.65c1.8-1.26 3.01-3.23 3.26-5.47-1.27.83-2.7 1.67-3.84 2.25-2.78 1.4-4.67 4.54-4.74 7.01-1.83-2.15-2.93-4.92-2.93-7.94 0-6.67 5.38-12.04 12.05-12.04 5.49 0 10.09 3.64 11.6 8.63m-7.34 8.73c.88 0 1.6-.71 1.6-1.6 0-.89-.72-1.6-1.6-1.6-.89 0-1.6.71-1.6 1.6 0 .89.71 1.6 1.6 1.6m-4.19-3.23c.06-.53.39-1 .85-1.29.1-.07.22-.12.34-.16-.06.17-.1.34-.1.53 0 .89.71 1.6 1.6 1.6.19 0 .36-.03.53-.1-.04.12-.09.24-.16.34-.26.41-.7.73-1.24.78-.18.02-.37.01-.55-.03-.13-.03-.26-.09-.38-.16-.25-.15-.45-.36-.59-.61-.16-.28-.24-.6-.21-.91" />
          </svg>
        );
      default:
        return (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={cn(sizeClass, svgStyle, className)} fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
          </svg>
        );
    }
  };

  return (
    <div className={cn("relative flex items-center justify-center", className)}>
      {renderAnimalIcon()}
      {isActive && (
        <div className={`absolute inset-0 rounded-full ${elementGlow} animate-pulse opacity-50`} />
      )}
    </div>
  );
};

export default BitBeastIcon;
